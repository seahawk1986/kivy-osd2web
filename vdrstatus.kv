#:kivy 1.9.0
#:import time time
# Color for recording label
#:set rec_color_active [1, .1, .1, 1]
#:set rec_color_inactive [.3, .3, .3, .7]

<CenteredBlockLabel@BlockLabel>:
  font_size: "480sp"
  halign: 'center'
  valign: 'middle'

<CenteredBlockButton@BlockButton>:
  font_size: "480sp"
  halign: 'center'
  valign: 'middle'


<MenuScreen>:
  BoxLayout:
    Button:
      text: 'Goto Clock'
      on_press: root.manager.current = 'settings'
    Button:
      text: 'Quit'

<SettingsScreen>:
  BoxLayout:
    orientation: 'vertical'
    spacing: 0

    BoxLayout:
      orientation: 'horizontal'
      spacing: 0
      padding: 0
      size_hint: 1, .1

      BlockButton:
        text: "Play" if app.is_replay_active else "TV"
        size_hint: .2, 1
        on_release: root.manager.current = 'menu'

      CenteredBlockLabel:
        size_hint: .6, 1
        text: time.strftime("%A, %d. %B %Y", app.localtime)

      CenteredBlockLabel:
        text: "[b]REC[/b]"
        markup: True
        color: rec_color_active if app.is_recording else rec_color_inactive
        size_hint: .2, 1

    CenteredBlockLabel:
      id: clock
      font_size: '480sp'
      size_hint: 1, .6
      text: time.strftime("%H:%M", app.localtime)

    CenteredBlockLabel:
      text: app.first_line
      shorten: True
      shorten_from: 'right'
      text_size: self.width -10, None
      size_hint: 1, .1

    CenteredBlockLabel:
      size_hint: 1, .1
      text_size: self.width -10, None
      shorten: True
      shorten_from: 'right'
      text: app.second_line

    ProgressBar:
      max: app.progress_max
      value: app.progress_value
      size_hint: 1, .01

    BoxLayout:
      orientation: 'horizontal'
      spacing: 5
      size_hint: 1, .2

      CenteredBlockLabel:
        text: app.starttime
        size_hint: .2, 1

      CenteredBlockLabel:
        id: playstatus
        text: "Pause" if (app.is_replay_active and not app.is_playing) else "{}/{} min".format(app.progress, app.duration)
        shorten: True
        shorten_from: 'right'
        text_size: self.width -10, None
        size_hint: .6, 1
        
      CenteredBlockLabel:
        text: app.endtime
        size_hint: .2, 1
